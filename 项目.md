面试官，你好，我叫冷阳，是华中科技大学软件工程专业研二的一名学生，我本科就读于武汉理工大学，计算机科学与技术学院，软件工程专业。本科时期，成绩优异，年级排名前10%，曾获得国家级奖学金以及“校三好学生”的称号。研究生期间也多次获得奖学金。研究生期间主要是跟着导师做一个国家自然基金的项目，我负责的子课题是关于张量分解的。因为很少接触到工程项目，所以我想通过实习来提高自己的实践能力，使自己学到的东西能够得到应用。

#### 微信第三方授权登录

首先微信开发者会申请得到一个appID和一个secrectID

1. 、当我们的网站需接入微信登陆时，会引导用户跳转到微信的登陆授权页面，此时把之前申请的appID带给登陆授权页面。

    其实质上是引导用户打开下面的链接：

    https://open.weixin.qq.com/connect/oauth2/authorize?appid=APPID&redirect_uri=REDIRECT_URI&response_type=code&scope=SCOPE&state=STATE#wechat_redirect

    这个操作可拉起微信并打开授权登录页

2. 用户确认后即得到授权，微信会返回一个临时的code给我们。code是通过微信登录的时候微信给传回来的参数，当进行微信登录的时候就会自动传回来，可以通过判断code来确定是否微信登录过了。

3. 接受到code后，加上AppID和AppSecret等，通过API从微信服务器获取access_token。

4. 获取到access_token后就可以调用微信提供的接口，获取用户信息等。

#### JWT和跨域

##### 跨域

浏览器在请求不同域的资源时，会因为同源策略的影响请求不成功，这就是通常被提到的**“跨域问题”**。

而所谓"同源策略"，即同域名(domain或ip)、同端口、同协议的才能互相获取资源，而不能访问其他域的资源。在同源策略影响下，一个域名A的网页可以获取域名B下的脚本,css,图片等，但是不能发送Ajax请求，也不能操作Cookie、LocalStorage等数据。

##### CSRF攻击

**跨站请求伪造**，CSRF攻击者在用户已经登录目标网站之后，诱使用户访问一个攻击页面，利用目标网站对用户的信任，以用户身份在攻击页面对目标网站发起伪造用户操作的请求，达到攻击目的。

CSRF 攻击的原理大致描述如下：有两个网站，其中A网站是真实受信任的网站，而B网站是危险网站。在用户登陆了受信任的A网站是，本地会存储A网站相关的Cookie，并且浏览器也维护这一个Session会话。这时，如果用户在没有登出A网站的情况下访问危险网站B，那么危险网站B就可以模拟发出一个对A网站的请求（跨域请求）对A网站进行操作，而在A网站的角度来看是并不知道请求是由B网站发出来的（Session和Cookie均为A网站的），这时便成功发动一次CSRF 攻击。

##### JWT

**Json Web Token**，它具备两个特点：

1. 简洁(Compact)：可以通过URL, POST 参数或者在 HTTP header 发送，因为数据量小，传输速度快。

2. 自包含(Self-contained)：负载中包含了所有用户所需要的信息，避免了多次查询数据库。

##### JWT组成部分

- **Header 头部**

    头部包含了两部分，token 类型和采用的加密算法

    ```
    {
      "alg": "HS256",
      "typ": "JWT"
    }
    ```

    它会使用 Base64 编码组成 JWT 结构的第一部分

- **Payload 负载**

    这部分就是我们存放信息的地方了，你可以把用户 ID 等信息放在这里，JWT 规范里面对这部分有进行了比较详细的介绍，常用的由 iss（签发者），exp（过期时间），sub（面向的用户），aud（接收方），iat（签发时间）。

    ```
    {
        "iss": "lion1ou JWT",
        "iat": 1441593502,
        "exp": 1441594722,
        "aud": "www.example.com",
        "sub": "lion1ou@163.com"
    }
    ```

    同样的，它会使用 Base64 编码组成 JWT 结构的第二部分

- Signature 签名

    前面两部分都是使用 Base64 进行编码的，即前端可以解开知道里面的信息。Signature 需要使用编码后的 header 和 payload 以及我们提供的一个密钥，然后使用 header 中指定的签名算法（HS256）进行签名。**签名的作用是保证 JWT 没有被篡改过。**

三个部分通过`.`连接在一起就是我们的 JWT 了，它可能长这个样子，长度貌似和你的加密算法和私钥有关系。

Base64是一种编码，是可逆的，所以，在JWT中，不应该在负载里面加入任何敏感的数据。

##### JWT使用方式

1. 首先，前端通过Web表单将自己的用户名和密码发送到后端的接口。这一过程一般是一个HTTP POST请求。建议的方式是通过SSL加密的传输（https协议），从而避免敏感信息被嗅探。
2. 后端核对用户名和密码成功后，**将用户的id等其他信息作为JWT Payload**（负载），将其与头部分别进行Base64编码拼接后签名，形成一个JWT。形成的JWT就是一个形同lll.zzz.xxx的字符串。
3. 后端将JWT字符串作为登录成功的返回结果返回给前端。前端可以将返回的结果**保存在localStorage或sessionStorage上**，退出登录时前端删除保存的JWT即可。
4. 前端在每次请求时将JWT放入HTTP **Header中的Authorization位**。(解决XSS和XSRF问题)
5. 后端检查是否存在，如存在验证JWT的有效性。例如，检查签名是否正确；检查Token是否过期；检查Token的接收方是否是自己（可选）。
6. 验证通过后后端使用JWT中包含的用户信息进行其他逻辑操作，返回相应结果。

##### JWT特点

1. JWT 默认是不加密，但也是可以加密的。生成原始 Token 以后，可以用密钥再加密一次。
2. JWT 不加密的情况下，不能将秘密数据写入 JWT。
3. JWT 不仅可以用于认证，也可以用于交换信息。有效使用 JWT，可以降低服务器查询数据库的次数。
4. JWT 的最大缺点是，**由于服务器不保存 session 状态，因此无法在使用过程中废止某个 token，或者更改 token 的权限**。也就是说，**一旦 JWT 签发了，在到期之前就会始终有效，除非服务器部署额外的逻辑**。
5. JWT 本身包含了认证信息，一旦泄露，任何人都可以获得该令牌的所有权限。为了减少盗用，JWT 的有效期应该设置得比较短。对于一些比较重要的权限，使用时应该再次对用户进行认证。
6. 为了减少盗用，JWT 不应该使用 HTTP 协议明码传输，要使用 HTTPS 协议传输。

MVC的优缺点

优点：

1. 耦合性低
    视图层和业务层分离，这样就允许更改视图层代码而不用重新编译模型和控制器代码

2. 重用性高
    MVC模式允许使用不同样式的视图来访问同一个服务器端的代码，因为多个视图能共享一个模型

3. 可维护性高

    分离视图层和业务逻辑层也使得WEB应用更易于维护和修改

缺点：

1. 增加系统结构和实现的复杂性
2. 不适合小型，中等规模的应用程序

#### Django

**MVT模式**

Model(模型)：数据存取层，实现数据持久化    

Template(模版)：表现层，负责如何把页面展示给用户    

View(视图)：业务逻辑层，调用Model和Template

**MVC模式**

C：controller控制器是指控制器接受用户的输入并调用模型和视图去完成用户的需求

M：模型做的是业务逻辑的操作比如查询数据库，封装数据

V：视图用来展示数据